[role=fabric]
[[query-call-subquery]]
= CALL {}

[abstract]
--
The `CALL {}` clause can be used to evaluate a subquery.
--

* <<query-call-subquery-introduction, Introduction>>
* <<query-call-subquery-examples, Examples>>

[[query-call-subquery-introduction]]
== Introduction

The `CALL {}` clause can be used to evaluate a subquery.

The `CALL` clause is also used for calling functions.
For descriptions of the `CALL` clause in this context, refer to <<query-call>>.

[NOTE]
====
This functionality is currently only available in Neo4j Fabric.
Find out more about this feature in <<operations-manual#fabric, Operations Manual -> Fabric>>.
====

[[query-call-subquery-examples]]
== Examples

The `CALL {}` clause evaluates a subquery that returns some values:

.Query.
[source, cypher]
----
UNWIND [0, 1, 2] AS x
CALL {
  UNWIND [10, 20, 30] AS y
  RETURN y
}
RETURN x, y
----

.Result
[source, cypher]
----
x, y
0, 10
0, 20
0, 30
1, 10
1, 20
1, 30
2, 10
2, 20
2, 30
----

Variables that are defined by clauses outside a subquery must be explicitly imported using the `WITH` clause at the beginning of the subquery:

.Query. 
[source, cypher]
----
UNWIND [0, 1, 2] AS x
CALL {
  WITH x
  UNWIND range(1, x) AS y
  RETURN 10 * y
}
RETURN x, y
----

.Result
[source, cypher]
----
x, y
1, 10
2, 10
2, 20
----

An exception to this rule is that, as a convenience, a `USE` clause in a subquery may refer to outside variables without a preceding import.
